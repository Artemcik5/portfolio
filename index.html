<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Math Challenge</title>
<link rel="stylesheet" href="style.css">
<style>
/* Add animation styles for options panel */
.options {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, opacity 0.4s ease;
}

.options.show {
  max-height: 500px;
  opacity: 1;
}

.mode-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.mode-display {
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>
<body>
<h1>Math Challenge</h1>

<div class="container menu active" id="menu">
  <p><strong>Choose a Mode:</strong></p>
  <div class="mode-buttons">
    <button class="btn mode-btn" data-mode="random">Random</button>
    <button class="btn mode-btn" data-mode="addition">Addition</button>
    <button class="btn mode-btn" data-mode="subtraction">Subtraction</button>
    <button class="btn mode-btn" data-mode="multiplication">Multiplication</button>
    <button class="btn mode-btn" data-mode="division">Division</button>
    <button class="btn mode-btn" data-mode="equation">Equations</button>
  </div>

  <!-- Display the currently selected mode -->
  <div class="mode-display" id="modeDisplay">Mode: None</div>

  <div id="options" class="options">
    <p><strong>Difficulty:</strong></p>
    <select id="difficultySelect">
      <option value="easy">Easy (1–10)</option>
      <option value="medium" selected>Medium (1–50)</option>
      <option value="hard">Hard (1–100)</option>
      <option value="nightmare">Nightmare (1–1000)</option>
    </select>

    <p><strong>Game Time:</strong></p>
    <select id="timeSelect">
      <option value="15">15 sec</option>
      <option value="30" selected>30 sec</option>
      <option value="45">45 sec</option>
      <option value="60">60 sec</option>
    </select>

    <button class="btn" id="startBtn">Start</button>
  </div>
</div>

<div class="container game" id="game">
  <div id="problem">3 + 4</div>
  <input type="text" id="answer" placeholder="?" />
  <button id="submitBtn" class="btn">Submit</button>
  <div id="score">Score: 0</div>
  <div id="timer">Time left: 30s</div>
  <div class="game-buttons">
    <button id="retryBtn" class="small-btn" style="display:none;">Retry</button>
    <button id="backBtn" class="small-btn">Back</button>
  </div>
</div>

<script>
let mode = 'random';
let num1, num2, correctAnswer;
let score = 0;
let timeLeft = 30;
let countdown;
let minNum = 1, maxNum = 10;

const menuEl = document.getElementById('menu');
const gameEl = document.getElementById('game');
const problemEl = document.getElementById('problem');
const answerEl = document.getElementById('answer');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const submitBtn = document.getElementById('submitBtn');
const retryBtn = document.getElementById('retryBtn');
const backBtn = document.getElementById('backBtn');
const optionsEl = document.getElementById('options');
const difficultySelectEl = document.getElementById('difficultySelect');
const timeSelectEl = document.getElementById('timeSelect');
const startBtn = document.getElementById('startBtn');
const modeButtons = document.querySelectorAll('.mode-btn');
const modeDisplayEl = document.getElementById('modeDisplay');

modeButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    mode = btn.dataset.mode;

    // Update display
    modeDisplayEl.textContent = `Mode: ${btn.textContent}`;

    // Animate options panel every time
    optionsEl.classList.remove('show');
    void optionsEl.offsetWidth; // force reflow
    optionsEl.classList.add('show');
  });
});

startBtn.addEventListener('click', startGame);

backBtn.addEventListener('click', () => {
  clearInterval(countdown);
  gameEl.classList.remove('active');
  menuEl.classList.add('active');
  optionsEl.classList.remove('show');
});

retryBtn.addEventListener('click', startGame);

function setDifficulty() {
  const level = difficultySelectEl.value;
  if (level === 'easy') { minNum = 1; maxNum = 10; }
  else if (level === 'medium') { minNum = 1; maxNum = 50; }
  else if (level === 'hard') { minNum = 1; maxNum = 100; }
  else if (level === 'nightmare') { minNum = 1; maxNum = 1000; }
}

function startGame() {
  setDifficulty();
  score = 0;
  timeLeft = parseInt(timeSelectEl.value);
  scoreEl.textContent = `Score: ${score}`;
  timerEl.textContent = `Time left: ${timeLeft}s`;
  answerEl.disabled = false;
  retryBtn.style.display = 'none';
  menuEl.classList.remove('active');
  gameEl.classList.add('active');
  newProblem();
  startTimer();
  answerEl.value = '';
  answerEl.focus();
}

function randomOperator() {
  const ops = ['addition', 'subtraction', 'multiplication', 'division', 'equation'];
  return ops[Math.floor(Math.random() * ops.length)];
}

function newProblem() {
  num1 = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;
  num2 = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;

  let currentMode = mode === 'random' ? randomOperator() : mode;
  generateProblem(currentMode);
}

function generateProblem(currentMode) {
  if (currentMode === 'equation') {
    generateEquation();
    return;
  }

  let operator;
  if (currentMode === 'addition') operator = '+';
  else if (currentMode === 'subtraction') operator = '-';
  else if (currentMode === 'multiplication') operator = '*';
  else if (currentMode === 'division') {
    operator = '/';
    num2 = Math.floor(Math.random() * (maxNum - 1)) + 1;
    num1 = num2 * Math.floor(Math.random() * (maxNum / 2)) + num2;
  }

  correctAnswer = eval(`${num1} ${operator} ${num2}`);
  if (operator === '/') correctAnswer = Math.round(correctAnswer * 100) / 100;

  problemEl.textContent = `${num1} ${operator} ${num2}`;
  answerEl.value = '';
  answerEl.focus();
}

function generateEquation() {
  let op = ['+', '-', '*'][Math.floor(Math.random() * 3)];
  let xVal = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;
  let n = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;
  let result;

  switch (op) {
    case '+': result = xVal + n; problemEl.textContent = `x + ${n} = ${result}`; break;
    case '-': result = xVal - n; problemEl.textContent = `x - ${n} = ${result}`; break;
    case '*': result = xVal * n; problemEl.textContent = `x × ${n} = ${result}`; break;
  }

  correctAnswer = xVal;
  answerEl.value = '';
  answerEl.focus();
}

function checkAnswer() {
  submitBtn.disabled = true;
  const userAnswer = Number(answerEl.value);
  const isCorrect = userAnswer === correctAnswer;
  flashProblem(isCorrect ? 'correct' : 'wrong');
  if (isCorrect) {
    score++;
    scoreEl.textContent = `Score: ${score}`;
  }

  setTimeout(() => {
    newProblem();
    submitBtn.disabled = false;
  }, 400);
}

function flashProblem(type) {
  problemEl.classList.remove('animate-correct', 'animate-wrong');
  void problemEl.offsetWidth;
  problemEl.classList.add(type === 'correct' ? 'animate-correct' : 'animate-wrong');
}

function startTimer() {
  clearInterval(countdown);
  countdown = setInterval(() => {
    timeLeft--;
    timerEl.textContent = `Time left: ${timeLeft}s`;
    if (timeLeft <= 0) {
      clearInterval(countdown);
      answerEl.disabled = true;
      submitBtn.disabled = true;
      problemEl.textContent = "Time's up!";
      retryBtn.style.display = 'inline-block';
      alert(`Game Over! Your final score: ${score}`);
    }
  }, 1000);
}

submitBtn.addEventListener('click', checkAnswer);
answerEl.addEventListener('keyup', (e) => {
  if (e.key === 'Enter') checkAnswer();
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Math Challenge</title>
<link rel="stylesheet" href="style.css">
<style>
/* Add animation styles for options panel */
.options {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, opacity 0.4s ease;
}

.options.show {
  max-height: 500px;
  opacity: 1;
}

.mode-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.mode-display {
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>
<body>
<h1>Math Challenge</h1>

<div class="container menu active" id="menu">
  <p><strong>Choose a Mode:</strong></p>
  <div class="mode-buttons">
    <button class="btn mode-btn" data-mode="random">Random</button>
    <button class="btn mode-btn" data-mode="addition">Addition</button>
    <button class="btn mode-btn" data-mode="subtraction">Subtraction</button>
    <button class="btn mode-btn" data-mode="multiplication">Multiplication</button>
    <button class="btn mode-btn" data-mode="division">Division</button>
    <button class="btn mode-btn" data-mode="equation">Equations</button>
  </div>

  <!-- Display the currently selected mode -->
  <div class="mode-display" id="modeDisplay">Mode: None</div>

  <div id="options" class="options">
    <p><strong>Difficulty:</strong></p>
    <select id="difficultySelect">
      <option value="easy">Easy (1–10)</option>
      <option value="medium" selected>Medium (1–50)</option>
      <option value="hard">Hard (1–100)</option>
      <option value="nightmare">Nightmare (1–1000)</option>
    </select>

    <p><strong>Game Time:</strong></p>
    <select id="timeSelect">
      <option value="15">15 sec</option>
      <option value="30" selected>30 sec</option>
      <option value="45">45 sec</option>
      <option value="60">60 sec</option>
    </select>

    <button class="btn" id="startBtn">Start</button>
  </div>
</div>

<div class="container game" id="game">
  <div id="problem">3 + 4</div>
  <input type="text" id="answer" placeholder="?" />
  <button id="submitBtn" class="btn">Submit</button>
  <div id="score">Score: 0</div>
  <div id="timer">Time left: 30s</div>
  <div class="game-buttons">
    <button id="retryBtn" class="small-btn" style="display:none;">Retry</button>
    <button id="backBtn" class="small-btn">Back</button>
  </div>
</div>

<script>
let mode = 'random';
let num1, num2, correctAnswer;
let score = 0;
let timeLeft = 30;
let countdown;
let minNum = 1, maxNum = 10;

const menuEl = document.getElementById('menu');
const gameEl = document.getElementById('game');
const problemEl = document.getElementById('problem');
const answerEl = document.getElementById('answer');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const submitBtn = document.getElementById('submitBtn');
const retryBtn = document.getElementById('retryBtn');
const backBtn = document.getElementById('backBtn');
const optionsEl = document.getElementById('options');
const difficultySelectEl = document.getElementById('difficultySelect');
const timeSelectEl = document.getElementById('timeSelect');
const startBtn = document.getElementById('startBtn');
const modeButtons = document.querySelectorAll('.mode-btn');
const modeDisplayEl = document.getElementById('modeDisplay');

modeButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    mode = btn.dataset.mode;

    // Update display
    modeDisplayEl.textContent = `Mode: ${btn.textContent}`;

    // Animate options panel every time
    optionsEl.classList.remove('show');
    void optionsEl.offsetWidth; // force reflow
    optionsEl.classList.add('show');
  });
});

startBtn.addEventListener('click', startGame);

backBtn.addEventListener('click', () => {
  clearInterval(countdown);
  gameEl.classList.remove('active');
  menuEl.classList.add('active');
  optionsEl.classList.remove('show');
});

retryBtn.addEventListener('click', startGame);

function setDifficulty() {
  const level = difficultySelectEl.value;
  if (level === 'easy') { minNum = 1; maxNum = 10; }
  else if (level === 'medium') { minNum = 1; maxNum = 50; }
  else if (level === 'hard') { minNum = 1; maxNum = 100; }
  else if (level === 'nightmare') { minNum = 1; maxNum = 1000; }
}

function startGame() {
  setDifficulty();
  score = 0;
  timeLeft = parseInt(timeSelectEl.value);
  scoreEl.textContent = `Score: ${score}`;
  timerEl.textContent = `Time left: ${timeLeft}s`;
  answerEl.disabled = false;
  retryBtn.style.display = 'none';
  menuEl.classList.remove('active');
  gameEl.classList.add('active');
  newProblem();
  startTimer();
  answerEl.value = '';
  answerEl.focus();
}

function randomOperator() {
  const ops = ['addition', 'subtraction', 'multiplication', 'division', 'equation'];
  return ops[Math.floor(Math.random() * ops.length)];
}

function newProblem() {
  num1 = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;
  num2 = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;

  let currentMode = mode === 'random' ? randomOperator() : mode;
  generateProblem(currentMode);
}

function generateProblem(currentMode) {
  if (currentMode === 'equation') {
    generateEquation();
    return;
  }

  let operator;
  if (currentMode === 'addition') operator = '+';
  else if (currentMode === 'subtraction') operator = '-';
  else if (currentMode === 'multiplication') operator = '*';
  else if (currentMode === 'division') {
    operator = '/';
    num2 = Math.floor(Math.random() * (maxNum - 1)) + 1;
    num1 = num2 * Math.floor(Math.random() * (maxNum / 2)) + num2;
  }

  correctAnswer = eval(`${num1} ${operator} ${num2}`);
  if (operator === '/') correctAnswer = Math.round(correctAnswer * 100) / 100;

  problemEl.textContent = `${num1} ${operator} ${num2}`;
  answerEl.value = '';
  answerEl.focus();
}

function generateEquation() {
  let op = ['+', '-', '*'][Math.floor(Math.random() * 3)];
  let xVal = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;
  let n = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;
  let result;

  switch (op) {
    case '+': result = xVal + n; problemEl.textContent = `x + ${n} = ${result}`; break;
    case '-': result = xVal - n; problemEl.textContent = `x - ${n} = ${result}`; break;
    case '*': result = xVal * n; problemEl.textContent = `x × ${n} = ${result}`; break;
  }

  correctAnswer = xVal;
  answerEl.value = '';
  answerEl.focus();
}

function checkAnswer() {
  submitBtn.disabled = true;
  const userAnswer = Number(answerEl.value);
  const isCorrect = userAnswer === correctAnswer;
  flashProblem(isCorrect ? 'correct' : 'wrong');
  if (isCorrect) {
    score++;
    scoreEl.textContent = `Score: ${score}`;
  }

  setTimeout(() => {
    newProblem();
    submitBtn.disabled = false;
  }, 400);
}

function flashProblem(type) {
  problemEl.classList.remove('animate-correct', 'animate-wrong');
  void problemEl.offsetWidth;
  problemEl.classList.add(type === 'correct' ? 'animate-correct' : 'animate-wrong');
}

function startTimer() {
  clearInterval(countdown);
  countdown = setInterval(() => {
    timeLeft--;
    timerEl.textContent = `Time left: ${timeLeft}s`;
    if (timeLeft <= 0) {
      clearInterval(countdown);
      answerEl.disabled = true;
      submitBtn.disabled = true;
      problemEl.textContent = "Time's up!";
      retryBtn.style.display = 'inline-block';
      alert(`Game Over! Your final score: ${score}`);
    }
  }, 1000);
}

submitBtn.addEventListener('click', checkAnswer);
answerEl.addEventListener('keyup', (e) => {
  if (e.key === 'Enter') checkAnswer();
});
</script>
</body>
</html>
